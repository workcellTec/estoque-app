<meta name='viewport' content='width=device-width, initial-scale=1'/><!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1" name="viewport"/>
    <title>Central Workcell</title>
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#000000"/>
    <link rel="apple-touch-icon" href="https://placehold.co/192x192/B71C1C/ffffff?text=CW">
    <link rel="manifest" href="manifest.json">
    
    <link href="https://fonts.googleapis.com" rel="preconnect"/>
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet"/>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css">

    <script src="https://cdn.jsdelivr.net/npm/fuse.js/dist/fuse.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
<div id="loadingOverlay" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: var(--tertiary-color); z-index: 10000; display: flex; flex-direction: column; align-items: center; justify-content: center; transition: opacity 0.5s ease;">
    <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;">
        <span class="visually-hidden">Loading...</span>
    </div>
    <p class="mt-3" style="color: var(--text-secondary);">Carregando sistema...</p>
</div>

<div id="top-right-controls" class="hidden">
    <div class="toggle-switch-theme">
        <input type="checkbox" id="theme-toggle-checkbox">
        <label for="theme-toggle-checkbox">
            <span><i class="bi bi-moon-fill"></i></span>
            <span><i class="bi bi-sun-fill"></i></span>
        </label>
    </div>
    <div id="notification-bell">
        <i class="bi bi-bell-fill"></i>
        <span class="notification-badge hidden"></span>
    </div>
</div>

<div class="container text-center" id="mainMenu">
    <h2 class="mb-4">Bem-vindo(a) à Central Workcell,<br/>O que você quer fazer?</h2>
    <div class="d-grid gap-2">
        <button class="btn-menu" id="goToCalculator"><i class="bi bi-calculator-fill"></i> Calculadora de Taxa</button>
        <button class="btn-menu" id="goToContract"><i class="bi bi-file-earmark-text-fill"></i> Boletos</button>
        <button class="btn-menu" id="goToStock"><i class="bi bi-box-seam"></i> Controle de Estoque</button>
        <button class="btn-menu" id="goToAdmin"><i class="bi bi-gear"></i> Administração</button>
    </div>
</div>

<div id="calculatorContainer" class="hidden">
    </div>

<div id="contractContainer" class="container hidden">
    </div>

<div id="stockContainer" class="container hidden">
    <div class="section-header">
        <h3>Controle de Estoque</h3>
        <button aria-label="Voltar" class="btn-back" id="backFromStock"><i class="bi bi-arrow-left"></i></button>
    </div>
    <div class="content-card w-100">
        <div class="d-flex justify-content-between align-items-center mb-3 flex-wrap gap-2">
            <input class="form-control" id="stockSearchInput" placeholder="Filtrar produtos..." style="flex: 1; min-width: 180px;" type="text">
            <div class="btn-group">
                <button class="btn btn-outline-secondary btn-sm" id="toggleIgnoredBtn" title="Mostrar produtos ignorados"><i class="bi bi-eye-slash-fill"></i></button>
                <button class="btn btn-outline-danger btn-sm" id="resetCountBtn" title="Resetar Contagem"><i class="bi bi-arrow-counterclockwise"></i></button>
                <button class="btn btn-info btn-sm" id="generateReportBtn"><i class="bi bi-printer"></i> Relatório</button>
            </div>
        </div>
        <div class="stock-list-container" id="stockTableBody">
            </div>
    </div>
</div>

<div class="container" id="administracao" style="display: none;">
    </div>

<div id="contractPreview"></div>
<div id="reportPreview"></div>

<div class="user-id-display" id="userIdDisplay" style="display: none;"></div>
<div class="custom-modal-overlay" id="customModalOverlay">
    </div>
<div class="offcanvas offcanvas-end" tabindex="-1" id="notificationPanel" aria-labelledby="notificationPanelLabel">
  </div>

<script type="application/json" id="manifest-data">
{
  "name": "Central Workcell",
  "short_name": "CentralWorkcell",
  "description": "Calculadora de taxas e gerador de contratos para facilitar suas vendas.",
  "start_url": ".",
  "display": "standalone",
  "background_color": "#000000",
  "theme_color": "#B71C1C",
  "orientation": "portrait-primary",
  "icons": [
    { "src": "https://placehold.co/192x192/B71C1C/ffffff?text=CW", "type": "image/png", "sizes": "192x192" },
    { "src": "https://placehold.co/512x512/B71C1C/ffffff?text=CW", "type": "image/png", "sizes": "512x512" }
  ]
}
</script>
<script type="text/plain" id="sw-script">
const CACHE_NAME = 'centrar-workcell-cache-v1';
const urlsToCache = [ '/', '/index.html', 'style.css', 'main.js', 'https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap', 'https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css', 'https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css', 'https://cdn.jsdelivr.net/npm/fuse.js/dist/fuse.min.js', 'https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js', 'https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js', 'https://www.gstatic.com/firebasejs/11.9.1/firebase-auth.js', 'https://www.gstatic.com/firebasejs/11.9.1/firebase-database.js' ];
self.addEventListener('install', event => { event.waitUntil( caches.open(CACHE_NAME).then(cache => { console.log('Cache aberto'); return cache.addAll(urlsToCache); }) ); });
self.addEventListener('fetch', event => { event.respondWith( caches.match(event.request).then(response => { if (response) { return response; } return fetch(event.request).then( response => { if(!response || response.status !== 200 || response.type !== 'basic') { return response; } const responseToCache = response.clone(); caches.open(CACHE_NAME).then(cache => { cache.put(event.request, responseToCache); }); return response; } ); }) ); });
self.addEventListener('activate', event => { const cacheWhitelist = [CACHE_NAME]; event.waitUntil( caches.keys().then(cacheNames => { return Promise.all( cacheNames.map(cacheName => { if (cacheWhitelist.indexOf(cacheName) === -1) { return caches.delete(cacheName); } }) ); }) ); });
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script type="module" src="main.js"></script>

</body>
</html>